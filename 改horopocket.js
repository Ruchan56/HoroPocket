// ------------------------
// HoroPocket 占いデータ
// ------------------------
const fortunes = {
  "大吉": {
    "総合運": "今日はラッキーな日。小さな幸せを見逃さないで",
    "恋愛運": "大切な人とコミュニケーションを取ると吉",
    "金運": "臨時収入があるかも。チャンスを逃さないで。",
    "アドバイス": "ポジティブな気持ちで過ごすと運気アップ",
    "ラッキーカラー": "赤"
  },
  "吉": {
    "総合運": "今日は少し良いことがありそう。小さな幸せを見逃さずに",
    "恋愛運": "会話を大事にすると吉。積極的に話しかけて",
    "金運": "無駄遣いを控えれば安定。チャンスもあり",
    "アドバイス": "周りの人に優しくすると運気アップ",
    "ラッキーカラー": "青"
  },
  "中吉": {
    "総合運": "気分が安定する日。落ち着いて過ごすと吉",
    "恋愛運": "連絡を控えめにすると良いことあり",
    "金運": "計画的な支出で運気上昇",
    "アドバイス": "冷静に行動すると運気アップ",
    "ラッキーカラー": "緑"
  },
  "小吉": {
    "総合運": "今日は少し注意が必要。慎重に行動して",
    "恋愛運": "相手の気持ちに寄り添うと吉",
    "金運": "浪費に注意。無駄遣いを控えて",
    "アドバイス": "焦らず落ち着くことが大事",
    "ラッキーカラー": "黄色"
  },
  "末吉": {
    "総合運": "今日は普通の日。大きな変化はなし",
    "恋愛運": "特に動きはなし。焦らず",
    "金運": "普段通りで安定",
    "アドバイス": "小さなことに感謝すると運気アップ",
    "ラッキーカラー": "紫"
  },
  "凶": {
    "総合運": "今日は注意の日。慎重に行動して",
    "恋愛運": "誤解に注意。冷静に話すこと",
    "金運": "無駄遣いに注意。貯金を意識して",
    "アドバイス": "落ち着いて行動することが運気回復の鍵",
    "ラッキーカラー": "黒"
  }
};

// ------------------------
// 占いを表示する関数
// ------------------------
function showFortune() {
  const name = document.getElementById("name").value;
  const birth = document.getElementById("birth").value;

  if (!name || !birth) {
    alert("名前と生年月日を入力してください");
    return;
  }

  // 名前＋生年月日で毎回同じ結果にする
  const seed = hashCode(name + birth);
  const keys = Object.keys(fortunes);
  const luck = keys[seed % keys.length];
  const data = fortunes[luck];

  document.getElementById("result").innerHTML = `
    <h2>今日のあなたは...</h2>
    <div style="font-size:48px; margin:20px 0;">${luck}</div>
    <p><strong>総合運:</strong> ${data["総合運"]}</p>
    <p><strong>恋愛運:</strong> ${data["恋愛運"]}</p>
    <p><strong>金運:</strong> ${data["金運"]}</p>
    <p><strong>アドバイス:</strong> ${data["アドバイス"]}</p>
    <p><strong>ラッキーカラー:</strong> ${data["ラッキーカラー"]}</p>
  `;
}

// ------------------------
// 名前＋生年月日をハッシュ化
// ------------------------
function hashCode(str) {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    hash = str.charCodeAt(i) + ((hash << 5) - hash);
    hash = hash & hash;
  }
  return Math.abs(hash);
}


